import { me, siteMetadata } from '@/lib/data';
import image from './image.png';

export const article = {
  date: '2020-03-17',
  title: 'Flutter i wÅ‚asna paczuszka',
  description:
    'Czyli jak stworzyÄ‡ i opublikowaÄ‡ wÅ‚asnÄ… paczkÄ™ na pub.dev',
  author: me,
  image,
  lang: 'pl'
};

export const metadata = {
  title: article.title,
  description: article.description,
  author: { name: article.author.name },
  ...siteMetadata,
  keywords: ['flutter', 'dart'],
};

# Flutter i wÅ‚asna paczuszka

Ten post jest powiÄ…zany z [poprzednim](https://pr0gramista.pl/post/dart-i-zestaw-znakow/), gdzie opowiedziaÅ‚em swojÄ… historiÄ™ walki z brakujÄ…cymi kodowaniami znakÃ³w. DziÅ› pokaÅ¼Ä™ wam jak zrobiÄ‡ swojÄ…Â wÅ‚asnÄ… paczuszkÄ™ z kodem platformy tak jak ja to zrobiÅ‚em.

## Nowy projekt
Paczki, czy teÅ¼Â pluginy to dalej projekty Flutterowe, wiÄ™c najlepszym sposobem na stworzenie nowego to uÅ¼ycie narzÄ™dzia do generowania czyli Flutterowego CLI z odpowiednim szablonem. DomyÅ›lny szablon to aplikacja (app), ale my chcemy package, jeÅ›li nie potrzebujesz kodu platformy albo plugin jeÅ›li potrzebujesz. W moim przypadku potrzebowaÅ‚em wiÄ™c uÅ¼yÅ‚em plugin.

```bash
flutter create --template=plugin awesome_package
```

Ciekawostka: awesome-package to niepoprawna nazwa Dartowej paczuszki, ale awesome_package juÅ¼ jest OK.

Gdy generowanie siÄ™Â zakoÅ„czy pomyÅ›lnie to wtedy moÅ¼na otworzyÄ‡ nowy projekt w swoim ulubionym edytorzeâ€”w moim przypadku jest to Visual Studio Code.

## Struktura projektu
Struktura projektu jest bardzo podobna do struktury aplikacji Flutterowej. Kod Darta trzymamy w lib, kod platformy osobno w np. android czy ios no i testy w folderze test. MoÅ¼esz siÄ™ jednak zdziwiÄ‡, Å¼e w lib nie ma Å¼adnego kodu, ktÃ³ry by umoÅ¼liwiaÅ‚ odpalanie twojego projektu i to ma sensâ€”dziwne by byÅ‚o odpalanie pluginu w jakimÅ› eterze.

Jak w takim razie przetestowaÄ‡ manualnie swÃ³j plugin? OdpowiedÅº jest w folderze example w ktÃ³rym jest zainicjalizowana apka Flutterowa, ktÃ³rym celem jest bycie dziaÅ‚ajÄ…cych przykÅ‚adem twojej paczuszki. Å»yje ona w tym samym folderze i importuje kod paczki relatywnie, wiÄ™c wszystkie funkcje typu hot-reloading, debugging normalnie dziaÅ‚ajÄ….

Na poczÄ…tku myÅ›laÅ‚em, Å¼e to strasznie dziwne rozwiÄ…zanie, ale pÃ³Åºniej zauwaÅ¼yÅ‚em, Å¼e jest to naprawdÄ™Â genialne. To taki ustandaryzowany sposÃ³b na dostarczenie przynajmniej jednego dziaÅ‚ajÄ…cego przykÅ‚adu wiÄ™kszoÅ›ci funkcji.

Teraz moÅ¼esz juÅ¼ przejÅ›Ä‡Â do tworzenia twojej nowej paczuszki!

## Czas publikacji
Dobra, skoÅ„czyÅ‚eÅ›â€”co teraz? Najpierw, przejdÅºmy siÄ™ po kilku 

* UdostÄ™pnij swÃ³j kod na GitHubie, to nie jest wymagane, ale uÅ‚atwia wszystkim Å¼ycie m.in. kontrybuowanie do twojego kodu, raportowanie problemÃ³w. Nie bÃ³j siÄ™, Å¼e ktoÅ› ciÄ™ bÄ™dzie Åºle oceniaÅ‚â€”w koÅ„cu robisz to za darmo
* Otaguj (Gitem) swoje wydania paczek, tak bÄ™dzie Å‚atwiej Å›ledziÄ‡ zmiany
* Napisz dokumentacje, przynajmniej do publicznych interfejsÃ³w. JeÅ›li nie wiesz jak sprawdÅºÂ tÄ™Â stronÄ™Â dokumentacji albo zainspiruj siÄ™ dokumentacjÄ… Fluttera
* Dodaj plik README.md, spraw by twoja paczka byÅ‚a przystÄ™pniejsza
* Dodaj plik CHANGELOG.md i opisuj co kolejne wydanie wprowadza lub zmienia. Ten krok jest wymagany, bo pomaga pÃ³Åºniej innym migrowaÄ‡ z wersji na wersja a przy tym pomaga uniknÄ…Ä‡ niepotrzebnych wydaÅ„.
* Dodaj licencje w pliku LICENSE, jeÅ›li nie wiesz ktÃ³rÄ…â€”sprawdÅº choosealicense.com
* UzupeÅ‚nij dane w pubspec.yaml
* Sprecyzuj, ktÃ³re platformy sÄ… wspierane. Flutter ma do tego nowy mechanizm opisany tutaj
* Upewnij siÄ™, Å¼e nie opublikujesz nic wiÄ™cej niÅ¼ co jest potrzebne. Pub automatycznie filtruje pliki uÅ¼ywajÄ…c .gitignore, wiÄ™c wystarczy Å¼e sprawdzisz czy nic dodatkowego nie masz w swoim folderze np. uÅ¼ywajÄ…c polecenia git status
* PamiÄ™taj teÅ¼, Å¼e jest gÃ³rny limit 10MB wielkoÅ›ci paczuszki
* Zarejestuj siÄ™ jako zweryfikowany wydawca

Wiem, wiem, caÅ‚kiem sporo tego. Nie musisz siÄ™ jednak obawiaÄ‡, bo wszystkie te punkty sÄ…Â w miarÄ™ proste. PamiÄ™taj teÅ¼, Å¼e moÅ¼esz uÅ¼yÄ‡Â komendy pub publish --dry-run by sprawdziÄ‡Â jak pub zareaguje a jednoczeÅ›nie niczego nie wysÅ‚aÄ‡.

## The Final Countdown
NadeszÅ‚a ta chwila, Å¼eby zrobiÄ‡ ten ostatni krok. Odpal pub publish i podÄ…Å¼aj za instrukcjami, nie zdziw siÄ™ jeÅ›li coÅ› jeszcze bÄ™dzie trzeba zrobiÄ‡. JeÅ›li wszystko pÃ³jdzie gÅ‚adko to po chwili powinieneÅ›Â otrzymaÄ‡ maila z potwierdzeniem, Å¼e twoja paczka jest opublikowana ğŸ‰

Kolejnym krokiem jest sprawdzenie oceny analizatoraâ€”to jest ta liczba w niebieskim kÃ³Å‚ku na stronie paczki w pub.dev. MoÅ¼na jÄ… kliknÄ…Ä‡ i przejÅ›Ä‡Â do szczegÃ³Å‚Ã³w oceny i zobaczyÄ‡Â czy coÅ›Â moÅ¼na poprawiÄ‡. Oceny popularnoÅ›ci nie poprawisz sam, ale ona bardzo szybko roÅ›nie wraz z uÅ¼ytkownikami. PamiÄ™taj teÅ¼, Å¼e moÅ¼e chwila minÄ…Ä‡ zanim analizator wystawi ocenÄ™.

Ostatni krok to podzielenie siÄ™ swojÄ… pracÄ… ze Å›wiatem! Ludzie czekajÄ…. Twitter, Slack, Discord sÄ… perfekcyjnymi miejscami by siÄ™ pokazaÄ‡, wystarczy Å¼e napiszesz na wÅ‚aÅ›ciwym kanale i nie bÄ™dziesz spamowaÅ‚. 

JeÅ›li coÅ› stworzysz to daj mi znaÄ‡!

WesoÅ‚ego Kodzenia ğŸ’™


